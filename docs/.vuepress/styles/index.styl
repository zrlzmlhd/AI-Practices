// ==========================================
// 全局样式 - Labuladong 风格
// ==========================================

// 引入调色板
@require './palette'

// ==========================================
// 字体配置
// ==========================================
body
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"
  font-size: 16px
  line-height: 1.7
  color: $textColor
  background-color: $bgColor
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale

// ==========================================
// 导航栏样式 - 玻璃拟态效果
// ==========================================
.navbar
  height: $navbarHeight
  background: $bgColorBlur
  backdrop-filter: saturate(180%) blur(20px)
  -webkit-backdrop-filter: saturate(180%) blur(20px)
  border-bottom: 1px solid rgba(0, 0, 0, 0.05)
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.04)

  .site-name
    font-weight: 700
    font-size: 1.3rem
    color: $textColor

  .nav-link
    font-weight: 500
    color: $textColor
    transition: $transitionFast

    &:hover
      color: $accentColor

    &.router-link-active
      color: $accentColor

// ==========================================
// 侧边栏样式 - 结构化目录树
// ==========================================
.sidebar
  width: $sidebarWidth
  background: $sidebarBgColor
  border-right: 1px solid $borderColor

  .sidebar-links
    padding: 1.5rem 0

  .sidebar-group
    .sidebar-heading
      font-weight: 600
      font-size: 0.95rem
      color: $textColor
      padding: 0.5rem 1.5rem
      cursor: pointer
      transition: $transitionFast

      &:hover
        color: $accentColor

      .arrow
        transition: $transitionFast

    &.is-sub-group
      .sidebar-heading
        font-weight: 500
        font-size: 0.9rem
        padding-left: 2rem

  .sidebar-link
    font-size: 0.9rem
    color: $textColorLight
    padding: 0.4rem 1.5rem 0.4rem 2rem
    border-left: 3px solid transparent
    transition: $transitionFast

    &:hover
      color: $accentColor
      background: rgba(17, 168, 205, 0.05)

    &.active
      color: $accentColor
      background: rgba(17, 168, 205, 0.1)
      border-left-color: $accentColor
      font-weight: 500

// ==========================================
// 内容区域样式
// ==========================================
.theme-vdoing-content
  max-width: $contentWidth
  margin: 0 auto
  padding: 2rem 2.5rem

  // 标题样式
  h1, h2, h3, h4, h5, h6
    font-weight: 600
    line-height: 1.4
    color: $textColor

    &:hover .header-anchor
      opacity: 1

  h1
    font-size: 2rem
    border-bottom: 2px solid $borderColor
    padding-bottom: 0.8rem
    margin-bottom: 1.5rem

  h2
    font-size: 1.65rem
    border-bottom: 1px solid $borderColor
    padding-bottom: 0.5rem
    margin-top: 2.5rem
    margin-bottom: 1rem

  h3
    font-size: 1.35rem
    margin-top: 2rem
    margin-bottom: 0.8rem

  // 链接样式
  a
    color: $accentColor
    text-decoration: none
    border-bottom: 1px solid transparent
    transition: $transitionFast

    &:hover
      border-bottom-color: $accentColor

  // 段落样式
  p
    margin: 1rem 0
    line-height: 1.8

  // 列表样式
  ul, ol
    padding-left: 1.5rem
    margin: 1rem 0

    li
      margin: 0.5rem 0
      line-height: 1.7

// ==========================================
// 代码块样式 - One Dark 主题
// ==========================================
div[class*="language-"]
  position: relative
  background: $codeBgColor
  border-radius: $borderRadius
  margin: 1rem 0
  overflow: hidden

  &::before
    content: attr(data-ext)
    position: absolute
    top: 0.8rem
    right: 1rem
    font-size: 0.75rem
    color: rgba(255, 255, 255, 0.4)
    text-transform: uppercase

  pre
    padding: 1.5rem
    margin: 0
    overflow-x: auto

    code
      font-family: "Fira Code", "JetBrains Mono", Consolas, Monaco, "Andale Mono", monospace
      font-size: 0.875rem
      line-height: 1.6
      color: $codeColor
      background: transparent

  .line-numbers-wrapper
    position: absolute
    top: 0
    left: 0
    width: 3rem
    padding: 1.5rem 0
    background: rgba(0, 0, 0, 0.2)
    text-align: center
    color: rgba(255, 255, 255, 0.3)
    font-size: 0.875rem
    line-height: 1.6

  &.line-numbers-mode
    pre
      padding-left: 4rem

// 复制按钮
.code-copy
  position: absolute
  top: 0.5rem
  right: 0.5rem
  padding: 0.3rem 0.6rem
  font-size: 0.75rem
  color: rgba(255, 255, 255, 0.6)
  background: rgba(255, 255, 255, 0.1)
  border: none
  border-radius: $borderRadiusSmall
  cursor: pointer
  transition: $transitionFast

  &:hover
    color: #fff
    background: rgba(255, 255, 255, 0.2)

// 行内代码
code:not(pre code)
  font-family: "Fira Code", Consolas, Monaco, monospace
  font-size: 0.875em
  padding: 0.2em 0.4em
  margin: 0 0.2em
  background: rgba(17, 168, 205, 0.1)
  color: $accentColor
  border-radius: $borderRadiusSmall

// ==========================================
// 提示块样式 (Admonitions/Callouts)
// ==========================================
.custom-block
  padding: 1rem 1.5rem
  margin: 1.5rem 0
  border-radius: $borderRadius
  border-left: 4px solid

  .custom-block-title
    font-weight: 600
    margin-bottom: 0.5rem

  p
    margin: 0.5rem 0

  &.tip
    background: rgba(17, 168, 205, 0.08)
    border-left-color: $tipColor

    .custom-block-title
      color: $tipColor

  &.warning
    background: rgba(231, 192, 0, 0.08)
    border-left-color: $warningColor

    .custom-block-title
      color: darken($warningColor, 15%)

  &.danger
    background: rgba(204, 0, 0, 0.08)
    border-left-color: $dangerColor

    .custom-block-title
      color: $dangerColor

  &.note, &.info
    background: rgba(78, 110, 142, 0.08)
    border-left-color: $noteColor

    .custom-block-title
      color: $noteColor

// ==========================================
// 右侧目录 (Table of Contents)
// ==========================================
.right-menu-wrapper
  width: $rightMenuWidth
  position: fixed
  right: 2rem
  top: 92px // 60px navbar + 32px margin
  max-height: calc(100vh - 124px) // 100vh - 60px navbar - 64px margins
  overflow-y: auto

  .right-menu-title
    font-weight: 600
    font-size: 0.85rem
    color: $textColor
    margin-bottom: 0.8rem
    padding-bottom: 0.5rem
    border-bottom: 1px solid $borderColor

  .right-menu-item
    font-size: 0.85rem
    color: $textColorLight
    padding: 0.3rem 0
    padding-left: 0.8rem
    border-left: 2px solid transparent
    transition: $transitionFast
    cursor: pointer

    &:hover
      color: $accentColor

    &.active
      color: $accentColor
      border-left-color: $accentColor
      font-weight: 500

    &.level-3
      padding-left: 1.5rem
      font-size: 0.8rem

// ==========================================
// 面包屑导航
// ==========================================
.breadcrumb-wrapper
  padding: 0.8rem 0
  margin-bottom: 1rem
  font-size: 0.9rem
  color: $textColorLight

  .breadcrumb-item
    color: $textColorLight

    &:hover
      color: $accentColor

    &.current
      color: $textColor
      font-weight: 500

  .breadcrumb-separator
    margin: 0 0.5rem
    color: $textColorLighter

// ==========================================
// 文章元数据
// ==========================================
.article-info
  display: flex
  flex-wrap: wrap
  gap: 1rem
  margin: 1rem 0 2rem
  padding-bottom: 1rem
  border-bottom: 1px solid $borderColor
  font-size: 0.85rem
  color: $textColorLight

  .info-item
    display: flex
    align-items: center
    gap: 0.3rem

    .icon
      font-size: 1rem

    &.author
      color: $accentColor

// ==========================================
// 底部导航 (上一篇/下一篇)
// ==========================================
.page-nav
  display: flex
  justify-content: space-between
  gap: 1rem
  margin-top: 3rem
  padding-top: 2rem
  border-top: 1px solid $borderColor

  .page-nav-item
    flex: 1
    padding: 1rem 1.5rem
    background: $bgColorLight
    border-radius: $borderRadius
    border: 1px solid $borderColor
    transition: $transition

    &:hover
      border-color: $accentColor
      box-shadow: $boxShadow

    .label
      font-size: 0.8rem
      color: $textColorLight
      margin-bottom: 0.3rem

    .title
      font-size: 1rem
      font-weight: 500
      color: $textColor

    &.prev
      text-align: left

    &.next
      text-align: right

// ==========================================
// 卡片样式
// ==========================================
.card
  background: $bgColor
  border-radius: $borderRadius
  border: 1px solid $borderColor
  box-shadow: $boxShadow
  transition: $transition
  overflow: hidden

  &:hover
    box-shadow: $boxShadowHover
    transform: translateY(-2px)

// ==========================================
// 暗黑模式
// ==========================================
html.dark
  $bgColor = #1b1b1d
  $bgColorLight = #242424
  $bgColorBlur = rgba(27, 27, 29, 0.9)
  $textColor = #e2e2e3
  $textColorLight = #a3a3a3
  $borderColor = #3a3a3c

  body
    background-color: $bgColor
    color: $textColor

  .navbar
    background: $bgColorBlur
    border-bottom-color: rgba(255, 255, 255, 0.05)

    .site-name, .nav-link
      color: $textColor

  .sidebar
    background: $bgColorLight
    border-right-color: $borderColor

    .sidebar-heading
      color: $textColor

    .sidebar-link
      color: $textColorLight

      &:hover, &.active
        background: rgba(17, 168, 205, 0.15)

  .theme-vdoing-content
    h1, h2, h3, h4, h5, h6
      color: $textColor

    h1, h2
      border-bottom-color: $borderColor

  code:not(pre code)
    background: rgba(17, 168, 205, 0.2)

  .custom-block
    &.tip
      background: rgba(17, 168, 205, 0.15)
    &.warning
      background: rgba(231, 192, 0, 0.15)
    &.danger
      background: rgba(204, 0, 0, 0.15)
    &.note, &.info
      background: rgba(78, 110, 142, 0.15)

  .page-nav-item
    background: $bgColorLight
    border-color: $borderColor

    .title
      color: $textColor

// ==========================================
// 响应式布局
// ==========================================
@media (max-width: 1200px)
  .right-menu-wrapper
    display: none

@media (max-width: 959px)
  .sidebar
    width: 100%
    position: fixed
    top: $navbarHeight
    left: -100%
    z-index: 100
    transition: $transition

    &.open
      left: 0

  .theme-vdoing-content
    padding: 1.5rem 1rem

@media (max-width: 719px)
  .navbar
    .site-name
      font-size: 1.1rem

  .theme-vdoing-content
    h1
      font-size: 1.6rem
    h2
      font-size: 1.4rem
    h3
      font-size: 1.2rem

  .page-nav
    flex-direction: column
